/*! For license information please see EaselPlugin.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,(function(e){"use strict";var t,r,i,n,l,o,s="redMultiplier,greenMultiplier,blueMultiplier,alphaMultiplier,redOffset,greenOffset,blueOffset,alphaOffset".split(","),u=function(){return"undefined"!=typeof window},a=function(){return t||u()&&(t=window.gsap)&&t.registerPlugin&&t},f=function(){return n||i&&i.createjs||i||{}},c=function(e){return console.warn(e)},d=function(e){var t=e.getBounds&&e.getBounds();t||(t=e.nominalBounds||{x:0,y:0,width:100,height:100},e.setBounds&&e.setBounds(t.x,t.y,t.width,t.height)),e.cache&&e.cache(t.x,t.y,t.width,t.height),c("EaselPlugin: for filters to display in EaselJS, you must call the object's cache() method first. GSAP attempted to use the target's getBounds() for the cache but that may not be completely accurate. "+e)},h=function(e,r,i){l||(l=f().ColorFilter)||c("EaselPlugin error: The EaselJS ColorFilter JavaScript file wasn't loaded.");for(var n,o,u,a,h,p,g=e.filters||[],b=g.length;b--;)if(g[b]instanceof l){o=g[b];break}if(o||(o=new l,g.push(o),e.filters=g),u=o.clone(),null!=r.tint)n=t.utils.splitColor(r.tint),a=null!=r.tintAmount?+r.tintAmount:1,u.redOffset=+n[0]*a,u.greenOffset=+n[1]*a,u.blueOffset=+n[2]*a,u.redMultiplier=u.greenMultiplier=u.blueMultiplier=1-a;else for(h in r)"exposure"!==h&&"brightness"!==h&&(u[h]=+r[h]);for(null!=r.exposure?(u.redOffset=u.greenOffset=u.blueOffset=255*(+r.exposure-1),u.redMultiplier=u.greenMultiplier=u.blueMultiplier=1):null!=r.brightness&&(a=+r.brightness-1,u.redOffset=u.greenOffset=u.blueOffset=a>0?255*a:0,u.redMultiplier=u.greenMultiplier=u.blueMultiplier=1-Math.abs(a)),b=8;b--;)o[h=s[b]]!==u[h]&&(p=i.add(o,h,o[h],u[h],0,0,0,0,0,1))&&(p.op="easel_colorFilter");i._props.push("easel_colorFilter"),e.cacheID||d(e)},p=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],g=.212671,b=.71516,M=.072169,m=function(e,t){if(!(e instanceof Array&&t instanceof Array))return t;var r,i,n=[],l=0,o=0;for(r=0;r<4;r++){for(i=0;i<5;i++)o=4===i?e[l+4]:0,n[l+i]=e[l]*t[i]+e[l+1]*t[i+5]+e[l+2]*t[i+10]+e[l+3]*t[i+15]+o;l+=5}return n},w=function(e,r,i){o||(o=f().ColorMatrixFilter)||c("EaselPlugin: The EaselJS ColorMatrixFilter JavaScript file wasn't loaded.");for(var n,l,s,u,a,h,w=e.filters||[],x=w.length;--x>-1;)if(w[x]instanceof o){s=w[x];break}for(s||(s=new o(p.slice()),w.push(s),e.filters=w),l=s.matrix,n=p.slice(),null!=r.colorize&&(n=function(e,r,i){isNaN(i)&&(i=1);var n=t.utils.splitColor(r),l=n[0]/255,o=n[1]/255,s=n[2]/255,u=1-i;return m([u+i*l*g,i*l*b,i*l*M,0,0,i*o*g,u+i*o*b,i*o*M,0,0,i*s*g,i*s*b,u+i*s*M,0,0,0,0,0,1,0],e)}(n,r.colorize,Number(r.colorizeAmount))),null!=r.contrast&&(a=n,h=Number(r.contrast),n=isNaN(h)?a:m([h+=.01,0,0,0,128*(1-h),0,h,0,0,128*(1-h),0,0,h,0,128*(1-h),0,0,0,1,0],a)),null!=r.hue&&(n=function(e,t){if(isNaN(t))return e;t*=Math.PI/180;var r=Math.cos(t),i=Math.sin(t);return m([g+r*(1-g)+i*-g,b+r*-b+i*-b,M+r*-M+i*(1-M),0,0,g+r*-g+.143*i,b+.28484*r+.14*i,M+r*-M+-.283*i,0,0,g+r*-g+-.787329*i,b+r*-b+i*b,M+r*(1-M)+i*M,0,0,0,0,0,1,0,0,0,0,0,1],e)}(n,Number(r.hue))),null!=r.saturation&&(n=function(e,t){if(isNaN(t))return e;var r=1-t,i=r*g,n=r*b,l=r*M;return m([i+t,n,l,0,0,i,n+t,l,0,0,i,n,l+t,0,0,0,0,0,1,0],e)}(n,Number(r.saturation))),x=n.length;--x>-1;)n[x]!==l[x]&&(u=i.add(l,x,l[x],n[x],0,0,0,0,0,1))&&(u.op="easel_colorMatrixFilter");i._props.push("easel_colorMatrixFilter"),e.cacheID||d(),i._matrix=l},x=function(e){t=e||a(),u()&&(i=window),t&&(r=1)},y={version:"3.13.0",name:"easel",init:function(e,i,n,l,o){var s,u,a,f,d,p,g;for(s in r||(x(),t||c("Please gsap.registerPlugin(EaselPlugin)")),this.target=e,i)if(d=i[s],"colorFilter"===s||"tint"===s||"tintAmount"===s||"exposure"===s||"brightness"===s)a||(h(e,i.colorFilter||i,this),a=!0);else if("saturation"===s||"contrast"===s||"hue"===s||"colorize"===s||"colorizeAmount"===s)f||(w(e,i.colorMatrixFilter||i,this),f=!0);else if("frame"===s){if("string"==typeof d&&"="!==d.charAt(1)&&(p=e.labels))for(g=0;g<p.length;g++)p[g].label===d&&(d=p[g].position);(u=this.add(e,"gotoAndStop",e.currentFrame,d,l,o,Math.round,0,0,1))&&(u.op=s)}else null!=e[s]&&this.add(e,s,"get",d)},render:function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next;t.target.cacheID&&t.target.updateCache()},register:x,registerCreateJS:function(e){n=e}};a()&&t.registerPlugin(y),e.EaselPlugin=y,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})}));