/*! For license information please see InertiaPlugin.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";var e,n,i,r,o,s,a,c,u=function(){return e||"undefined"!=typeof window&&(e=window.gsap)},f={},p=function(t){return c(t).id},l=function(t){return f[p("string"==typeof t?i(t)[0]:t)]},g=function(t){var e,n=o;if(t-a>=.05)for(a=t;n;)((e=n.g(n.t,n.p))!==n.v1||t-n.t1>.2)&&(n.v2=n.v1,n.v1=e,n.t2=n.t1,n.t1=t),n=n._next},v={deg:360,rad:2*Math.PI},h=function(){(e=u())&&(i=e.utils.toArray,r=e.utils.getUnit,c=e.core.getCache,s=e.ticker,n=1)},d=function(t,e,n,i){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=v[n||r(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=s.time,i&&(this._next=i,i._prev=this)},m=function(){function t(t,e){n||h(),this.target=i(t)[0],f[p(this.target)]=this,this._props={},e&&this.add(e)}t.register=function(t){e=t,h()};var r=t.prototype;return r.get=function(t,e){var n,i,r,o=this._props[t]||console.warn("Not tracking "+t+" velocity.");return n=parseFloat(e?o.v1:o.g(o.t,o.p))-parseFloat(o.v2),(i=o.rCap)&&(n%=i)!=n%(i/2)&&(n=n<0?n+i:n-i),r=n/((e?o.t1:s.time)-o.t2),Math.round(1e4*r)/1e4},r.getAll=function(){var t,e={},n=this._props;for(t in n)e[t]=this.get(t);return e},r.isTracking=function(t){return t in this._props},r.add=function(t,e){t in this._props||(o||(s.add(g),a=s.time),o=this._props[t]=new d(this.target,t,e,o))},r.remove=function(t){var e,n,i=this._props[t];i&&(e=i._prev,n=i._next,e&&(e._next=n),n?n._prev=e:o===i&&(s.remove(g),o=0),delete this._props[t])},r.kill=function(t){for(var e in this._props)this.remove(e);t||delete f[p(this.target)]},t.track=function(e,r,o){n||h();for(var s,a,c=[],u=i(e),f=r.split(","),p=(o||"").split(","),g=u.length;g--;){for(s=l(u[g])||new t(u[g]),a=f.length;a--;)s.add(f[a],p[a]||p[0]);c.push(s)}return c},t.untrack=function(t,e){var n=(e||"").split(",");i(t).forEach((function(t){var e=l(t);e&&(n.length?n.forEach((function(t){return e.remove(t)})):e.kill(1))}))},t.isTracking=function(t,e){var n=l(t);return n&&n.isTracking(e)},t.getVelocity=function(t,e){var n=l(t);return n&&n.isTracking(e)?n.get(e):console.warn("Not tracking velocity of "+e)},t}();m.getByTarget=l,u()&&e.registerPlugin(m);var y,_,k,w,x,T,F,P,N,b,M,A,O,E,j=m.getByTarget,C=function(){return y||"undefined"!=typeof window&&(y=window.gsap)&&y.registerPlugin&&y},B=function(t){return"number"==typeof t},I=function(t){return"object"==typeof t},R=function(t){return"function"==typeof t},V=Array.isArray,S=function(t){return t},U=1e10,q=function(t,e,n){for(var i in e)i in t||i===n||(t[i]=e[i]);return t},z=function t(e){var n,i,r={};for(n in e)r[n]=I(i=e[n])&&!V(i)?t(i):i;return r},D=function(t,e,n,i,r){var o,s,a,c,u=e.length,f=0,p=U;if(I(t)){for(;u--;){for(a in o=e[u],s=0,t)s+=(c=o[a]-t[a])*c;s<p&&(f=u,p=s)}if((r||U)<U&&r<Math.sqrt(p))return t}else for(;u--;)(s=(o=e[u])-t)<0&&(s=-s),s<p&&o>=i&&o<=n&&(f=u,p=s);return e[f]},G=function(t,e,n,i,r,o,s){if("auto"===t.end)return t;var a,c,u=t.end;if(n=isNaN(n)?U:n,i=isNaN(i)?-U:i,I(e)){if(a=e.calculated?e:(R(u)?u(e,s):D(e,u,n,i,o))||e,!e.calculated){for(c in a)e[c]=a[c];e.calculated=!0}a=a[r]}else a=R(u)?u(e,s):V(u)?D(e,u,n,i,o):parseFloat(u);return a>n?a=n:a<i&&(a=i),{max:a,min:a,unitFactor:t.unitFactor}},H=function(t,e,n){return isNaN(t[e])?n:+t[e]},J=function(t,e){return.05*e*t/b},K=function(t,e,n){return Math.abs((e-t)*b/n/.05)},L={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},Q=function(t,e,n,i){if(e.linkedProps){var r,o,s,a,c,u,f=e.linkedProps.split(","),p={};for(r=0;r<f.length;r++)(s=e[o=f[r]])&&(a=B(s.velocity)?s.velocity:(c=c||j(t))&&c.isTracking(o)?c.get(o):0,u=Math.abs(a/H(s,"resistance",i)),p[o]=parseFloat(n(t,o))+J(a,u));return p}},W=function(){(y=C())&&(k=y.parseEase,w=y.utils.toArray,F=y.utils.getUnit,N=y.core.getCache,M=y.utils.clamp,O=y.core.getStyleSaver,E=y.core.reverting||function(){},x=k("power3"),b=x(.05),P=y.core.PropTween,y.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),T=y.config(),y.registerPlugin(m),_=1)},X={version:"3.13.0",name:"inertia",register:function(t){y=t,W()},init:function(t,e,n,i,r){_||W();var o=j(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.styles=O&&"object"==typeof t.style&&O(t),this.target=t,this.tween=n,A=e;var s,a,c,u,f,p,l,g,v,h=t._gsap,d=h.get,m=e.duration,y=I(m),k=e.preventOvershoot||y&&0===m.overshoot,x=H(e,"resistance",T.resistance),b=B(m)?m:function(t,e,n,i,r,o){if(void 0===n&&(n=10),void 0===i&&(i=.2),void 0===r&&(r=1),void 0===o&&(o=0),"string"==typeof t&&(t=w(t)[0]),!t)return 0;var s,a,c,u,f,p,l,g,v,h,d=0,m=U,y=e.inertia||e,_=N(t).get,k=H(y,"resistance",T.resistance);for(s in h=Q(t,y,_,k),y)L[s]||(a=y[s],I(a)||((g=g||j(t))&&g.isTracking(s)?a=B(a)?{velocity:a}:{velocity:g.get(s)}:(u=+a||0,c=Math.abs(u/k))),I(a)&&(u=B(a.velocity)?a.velocity:(g=g||j(t))&&g.isTracking(s)?g.get(s):0,c=M(i,n,Math.abs(u/H(a,"resistance",k))),p=(f=parseFloat(_(t,s))||0)+J(u,c),"end"in a&&(a=G(a,h&&s in h?h:p,a.max,a.min,s,y.radius,u),o&&(A===e&&(A=y=z(e)),y[s]=q(a,y[s],"end"))),"max"in a&&p>+a.max+1e-10?(v=a.unitFactor||T.unitFactors[s]||1,(l=f>a.max&&a.min!==a.max||u*v>-15&&u*v<45?i+.1*(n-i):K(f,a.max,u))+r<m&&(m=l+r)):"min"in a&&p<+a.min-1e-10&&(v=a.unitFactor||T.unitFactors[s]||1,(l=f<a.min&&a.min!==a.max||u*v>-45&&u*v<15?i+.1*(n-i):K(f,a.min,u))+r<m&&(m=l+r)),l>d&&(d=l)),c>d&&(d=c));return d>m&&(d=m),d>n?n:d<i?i:d}(t,e,y&&m.max||10,y&&m.min||.2,y&&"overshoot"in m?+m.overshoot:k?0:1,!0);for(s in e=A,A=0,v=Q(t,e,d,x),e)L[s]||(a=e[s],R(a)&&(a=a(i,t,r)),B(a)?f=a:I(a)&&!isNaN(a.velocity)?f=+a.velocity:o&&o.isTracking(s)?f=o.get(s):console.warn("ERROR: No velocity was defined for "+t+" property: "+s),p=J(f,b),g=0,c=d(t,s),u=F(c),c=parseFloat(c),I(a)&&(l=c+p,"end"in a&&(a=G(a,v&&s in v?v:l,a.max,a.min,s,e.radius,f)),"max"in a&&+a.max<l?k||a.preventOvershoot?p=a.max-c:g=a.max-c-p:"min"in a&&+a.min>l&&(k||a.preventOvershoot?p=a.min-c:g=a.min-c-p)),this._props.push(s),this.styles&&this.styles.save(s),this._pt=new P(this._pt,t,s,c,0,S,0,h.set(t,s,this)),this._pt.u=u||0,this._pt.c1=p,this._pt.c2=g);return n.duration(b),1},render:function(t,e){var n,i=e._pt;if((t=x(e.tween._time/e.tween._dur))||!E())for(;i;)i.set(i.t,i.p,(n=i.s+i.c1*t+i.c2*t*t,Math.round(1e4*n)/1e4+i.u),i.d,t),i=i._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach((function(t){return X[t]=m[t]})),C()&&y.registerPlugin(X),t.InertiaPlugin=X,t.VelocityTracker=m,t.default=X,Object.defineProperty(t,"__esModule",{value:!0})}));