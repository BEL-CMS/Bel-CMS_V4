/*! For license information please see ScrollSmoother.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,(function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r,n,o,i,s,a,l,c,u,f,d,h,p,g,v,m=function(){return"undefined"!=typeof window},y=function(){return r||m()&&(r=window.gsap)&&r.registerPlugin&&r},w=function(e){return u.maxScroll(e||o)},b=function(){function e(t){var m=this;n||e.register(r)||console.warn("Please gsap.registerPlugin(ScrollSmoother)"),t=this.vars=t||{},f&&f.kill(),f=this,g(this);var y,b,S,T,_,x,C,E,P,k,R,A,M,N,z,F,H=t,I=H.smoothTouch,L=H.onUpdate,O=H.onStop,B=H.smooth,U=H.onFocusIn,q=H.normalizeScroll,V=H.wholePixels,j=this,D=t.effectsPrefix||"",Y=u.getScrollFunc(o),K=1===u.isTouch?!0===I?.8:parseFloat(I)||0:0===B||!1===B?0:parseFloat(B)||.8,W=K&&+t.speed||1,G=0,J=0,Q=1,X=h(0),Z=function(){return X.update(-G)},$={y:0},ee=function(){return y.style.overflow="visible"},te=function(e){e.update();var t=e.getTween();t&&(t.pause(),t._time=t._dur,t._tTime=t._tDur),z=!1,e.animation.progress(e.progress,!0)},re=function(t,r){(t!==G&&!k||r)&&(V&&(t=Math.round(t)),K&&(y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+t+", 0, 1)",y._gsap.y=t+"px"),J=t-G,G=t,u.isUpdating||e.isRefreshing||u.update())},ne=function(e){return arguments.length?(e<0&&(e=0),$.y=-e,z=!0,k?G=-e:re(-e),u.isRefreshing?T.update():Y(e/W),this):-G},oe="undefined"!=typeof ResizeObserver&&!1!==t.autoResize&&new ResizeObserver((function(){if(!u.isRefreshing){var e=w(b)*W;e<-G&&ne(e),v.restart(!0)}})),ie=function(e){b.scrollTop=0,e.target.contains&&e.target.contains(b)||U&&!1===U(m,e)||(u.isInViewport(e.target)||e.target===F||m.scrollTo(e.target,!1,"center center"),F=e.target)},se=function(e,t){if(e<t.start)return e;var r=isNaN(t.ratio)?1:t.ratio,n=t.end-t.start,o=e-t.start,i=t.offset||0,s=t.pins||[],a=s.offset||0,l=t._startClamp&&t.start<=0||t.pins&&t.pins.offset?0:t._endClamp&&t.end===w()?1:.5;return s.forEach((function(t){n-=t.distance,t.nativeStart<=e&&(o-=t.distance)})),a&&(o*=(n-a/r)/n),e+(o-i*l)/r-o},ae=function e(t,n,o){o||(t.pins.length=t.pins.offset=0);var i,s,a,l,c,u,f,d,h=t.pins,p=t.markers;for(f=0;f<n.length;f++)if(d=n[f],t.trigger&&d.trigger&&t!==d&&(d.trigger===t.trigger||d.pinnedContainer===t.trigger||t.trigger.contains(d.trigger))&&(c=d._startNative||d._startClamp||d.start,u=d._endNative||d._endClamp||d.end,a=se(c,t),l=d.pin&&u>0?a+(u-c):se(u,t),d.setPositions(a,l,!0,(d._startClamp?Math.max(0,a):a)-c),d.markerStart&&p.push(r.quickSetter([d.markerStart,d.markerEnd],"y","px")),d.pin&&d.end>0&&!o)){if(i=d.end-d.start,s=t._startClamp&&d.start<0){if(t.start>0)return t.setPositions(0,t.end+(t._startNative-t.start),!0),void e(t,n);i+=d.start,h.offset=-d.start}h.push({start:d.start,nativeStart:c,end:d.end,distance:i,trig:d}),t.setPositions(t.start,t.end+(s?-d.start:i),!0)}},le=function(e,t){_.forEach((function(r){return ae(r,e,t)}))},ce=function(){s=i.documentElement,a=i.body,ee(),requestAnimationFrame(ee),_&&(u.getAll().forEach((function(e){e._startNative=e.start,e._endNative=e.end})),_.forEach((function(e){var t=e._startClamp||e.start,r=e.autoSpeed?Math.min(w(),e.end):t+Math.abs((e.end-t)/e.ratio),n=r-e.end;if((t-=n/2)>(r-=n/2)){var o=t;t=r,r=o}e._startClamp&&t<0?(n=(r=e.ratio<0?w():e.end/e.ratio)-e.end,t=0):(e.ratio<0||e._endClamp&&r>=w())&&(n=((r=w())-(t=e.ratio<0||e.ratio>1?0:r-(r-e.start)/e.ratio))*e.ratio-(e.end-e.start)),e.offset=n||1e-4,e.pins.length=e.pins.offset=0,e.setPositions(t,r,!0)})),le(u.sort())),X.reset()},ue=function(){return u.addEventListener("refresh",ce)},fe=function(){return _&&_.forEach((function(e){return e.vars.onRefresh(e)}))},de=function(){return _&&_.forEach((function(e){return e.vars.onRefreshInit(e)})),fe},he=function(e,t,r,n){return function(){var o="function"==typeof t?t(r,n):t;o||0===o||(o=n.getAttribute("data-"+D+e)||("speed"===e?1:0)),n.setAttribute("data-"+D+e,o);var i="clamp("===(o+"").substr(0,6);return{clamp:i,value:i?o.substr(6,o.length-7):o}}},pe=function(e,t,n,i,a){a=("function"==typeof a?a(i,e):a)||0;var l,f,h,p,g,v,m=he("speed",t,i,e),y=he("lag",n,i,e),S=r.getProperty(e,"y"),T=e._gsap,x=[],C=function(){t=m(),n=parseFloat(y().value),l=parseFloat(t.value)||1,h="auto"===t.value,g=h||f&&f._startClamp&&f.start<=0||x.offset?0:f&&f._endClamp&&f.end===w()?1:.5,p&&p.kill(),p=n&&r.to(e,{ease:d,overwrite:!1,y:"+=0",duration:n}),f&&(f.ratio=l,f.autoSpeed=h)},E=function(){T.y=S+"px",T.renderTransform(1),C()},P=[],k=0,R=function(t){if(h){E();var r=function(e,t){var r,n,i=e.parentNode||s,a=e.getBoundingClientRect(),l=i.getBoundingClientRect(),c=l.top-a.top,u=l.bottom-a.bottom,f=(Math.abs(c)>Math.abs(u)?c:u)/(1-t),d=-f*t;return f>0&&(n=.5==(r=l.height/(o.innerHeight+l.height))?2*l.height:2*Math.min(l.height,Math.abs(-f*r/(2*r-1)))*(t||1),d+=t?-n*t:-n/2,f+=n),{change:f,offset:d}}(e,c(0,1,-t.start/(t.end-t.start)));k=r.change,v=r.offset}else v=x.offset||0,k=(t.end-t.start-v)*(1-l);x.forEach((function(e){return k-=e.distance*(1-l)})),t.offset=k||.001,t.vars.onUpdate(t),p&&p.progress(1)};return C(),(1!==l||h||p)&&(f=u.create({trigger:h?e.parentNode:e,start:function(){return t.clamp?"clamp(top bottom+="+a+")":"top bottom+="+a},end:function(){return t.value<0?"max":t.clamp?"clamp(bottom top-="+a+")":"bottom top-="+a},scroller:b,scrub:!0,refreshPriority:-999,onRefreshInit:E,onRefresh:R,onKill:function(e){var t=_.indexOf(e);t>=0&&_.splice(t,1),E()},onUpdate:function(e){var t,n,o,i,s=S+k*(e.progress-g),a=x.length,l=0;if(e.offset){if(a){for(n=-G,o=e.end;a--;){if((t=x[a]).trig.isActive||n>=t.start&&n<=t.end)return void(p&&(t.trig.progress+=t.trig.direction<0?.001:-.001,t.trig.update(0,0,1),p.resetTo("y",parseFloat(T.y),-J,!0),Q&&p.progress(1)));n>t.end&&(l+=t.distance),o-=t.distance}s=S+l+k*((r.utils.clamp(e.start,e.end,n)-e.start-l)/(o-e.start)-g)}P.length&&!h&&P.forEach((function(e){return e(s-l)})),i=s+v,s=Math.round(1e5*i)/1e5||0,p?(p.resetTo("y",s,-J,!0),Q&&p.progress(1)):(T.y=s+"px",T.renderTransform(1))}}}),R(f),r.core.getCache(f.trigger).stRevert=de,f.startY=S,f.pins=x,f.markers=P,f.ratio=l,f.autoSpeed=h,e.style.willChange="transform"),f};function ge(){return S=y.clientHeight,y.style.overflow="visible",a.style.height=o.innerHeight+(S-o.innerHeight)/W+"px",S-o.innerHeight}ue(),u.addEventListener("killAll",ue),r.delayedCall(.5,(function(){return Q=0})),this.scrollTop=ne,this.scrollTo=function(e,t,n){var o=r.utils.clamp(0,w(),isNaN(e)?m.offset(e,n,!!t&&!k):+e);t?k?r.to(m,{duration:K,scrollTop:o,overwrite:"auto",ease:d}):Y(o):ne(o)},this.offset=function(e,t,n){var o,i=(e=l(e)[0]).style.cssText,s=u.create({trigger:e,start:t||"top top"});return _&&(Q?u.refresh():le([s],!0)),o=s.start/(n?W:1),s.kill(!1),e.style.cssText=i,r.core.getCache(e).uncache=1,o},this.content=function(e){if(arguments.length){var t=l(e||"#smooth-content")[0]||console.warn("ScrollSmoother needs a valid content element.")||a.children[0];return t!==y&&(P=(y=t).getAttribute("style")||"",oe&&oe.observe(y),r.set(y,{overflow:"visible",width:"100%",boxSizing:"border-box",y:"+=0"}),K||r.set(y,{clearProps:"transform"})),this}return y},this.wrapper=function(e){return arguments.length?(b=l(e||"#smooth-wrapper")[0]||function(e){var t=i.querySelector(".ScrollSmoother-wrapper");return t||((t=i.createElement("div")).classList.add("ScrollSmoother-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e)),t}(y),E=b.getAttribute("style")||"",ge(),r.set(b,K?{overflow:"hidden",position:"fixed",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0}:{overflow:"visible",position:"relative",width:"100%",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"}),this):b},this.effects=function(e,t){var r;if(_||(_=[]),!e)return _.slice(0);(e=l(e)).forEach((function(e){for(var t=_.length;t--;)_[t].trigger===e&&_[t].kill()}));var n,o,i=t=t||{},s=i.speed,a=i.lag,c=i.effectsPadding,f=[];for(n=0;n<e.length;n++)(o=pe(e[n],s,a,n,c))&&f.push(o);return(r=_).push.apply(r,f),!1!==t.refresh&&u.refresh(),f},this.sections=function(e,t){var r;if(x||(x=[]),!e)return x.slice(0);var n=l(e).map((function(e){return u.create({trigger:e,start:"top 120%",end:"bottom -20%",onToggle:function(t){e.style.opacity=t.isActive?"1":"0",e.style.pointerEvents=t.isActive?"all":"none"}})}));return t&&t.add?(r=x).push.apply(r,n):x=n.slice(0),n},this.content(t.content),this.wrapper(t.wrapper),this.render=function(e){return re(e||0===e?e:G)},this.getVelocity=function(){return X.getVelocity(-G)},u.scrollerProxy(b,{scrollTop:ne,scrollHeight:function(){return ge()&&a.scrollHeight},fixedMarkers:!1!==t.fixedMarkers&&!!K,content:y,getBoundingClientRect:function(){return{top:0,left:0,width:o.innerWidth,height:o.innerHeight}}}),u.defaults({scroller:b});var ve=u.getAll().filter((function(e){return e.scroller===o||e.scroller===b}));ve.forEach((function(e){return e.revert(!0,!0)})),T=u.create({animation:r.fromTo($,{y:function(){return N=0,0}},{y:function(){return N=1,-ge()},immediateRender:!1,ease:"none",data:"ScrollSmoother",duration:100,onUpdate:function(){if(N){var e=z;e&&(te(T),$.y=G),re($.y,e),Z(),L&&!k&&L(j)}}}),onRefreshInit:function(t){if(!e.isRefreshing){if(e.isRefreshing=!0,_){var r=u.getAll().filter((function(e){return!!e.pin}));_.forEach((function(e){e.vars.pinnedContainer||r.forEach((function(t){if(t.pin.contains(e.trigger)){var r=e.vars;r.pinnedContainer=t.pin,e.vars=null,e.init(r,e.animation)}}))}))}var n=t.getTween();M=n&&n._end>n._dp._time,A=G,$.y=0,K&&(1===u.isTouch&&(b.style.position="absolute"),b.scrollTop=0,1===u.isTouch&&(b.style.position="fixed"))}},onRefresh:function(t){t.animation.invalidate(),t.setPositions(t.start,ge()/W),M||te(t),$.y=-Y()*W,re($.y),Q||(M&&(z=!1),t.animation.progress(r.utils.clamp(0,1,A/W/-t.end))),M&&(t.progress-=.001,t.update()),e.isRefreshing=!1},id:"ScrollSmoother",scroller:o,invalidateOnRefresh:!0,start:0,refreshPriority:-9999,end:function(){return ge()/W},onScrubComplete:function(){X.reset(),O&&O(m)},scrub:K||!0}),this.smooth=function(e){return arguments.length&&(W=(K=e||0)&&+t.speed||1,T.scrubDuration(e)),T.getTween()?T.getTween().duration():0},T.getTween()&&(T.getTween().vars.ease=t.ease||d),this.scrollTrigger=T,t.effects&&this.effects(!0===t.effects?"[data-"+D+"speed], [data-"+D+"lag]":t.effects,{effectsPadding:t.effectsPadding,refresh:!1}),t.sections&&this.sections(!0===t.sections?"[data-section]":t.sections),ve.forEach((function(e){e.vars.scroller=b,e.revert(!1,!0),e.init(e.vars,e.animation)})),this.paused=function(e,t){return arguments.length?(!!k!==e&&(e?(T.getTween()&&T.getTween().pause(),Y(-G/W),X.reset(),(R=u.normalizeScroll())&&R.disable(),(k=u.observe({preventDefault:!0,type:"wheel,touch,scroll",debounce:!1,allowClicks:!0,onChangeY:function(){return ne(-G)}})).nested=p(s,"wheel,touch,scroll",!0,!1!==t)):(k.nested.kill(),k.kill(),k=0,R&&R.enable(),T.progress=(-G/W-T.start)/(T.end-T.start),te(T))),this):!!k},this.kill=this.revert=function(){m.paused(!1),te(T),T.kill();for(var e=(_||[]).concat(x||[]),t=e.length;t--;)e[t].kill();u.scrollerProxy(b),u.removeEventListener("killAll",ue),u.removeEventListener("refresh",ce),b.style.cssText=E,y.style.cssText=P;var r=u.defaults({});r&&r.scroller===b&&u.defaults({scroller:o}),m.normalizer&&u.normalizeScroll(!1),clearInterval(C),f=null,oe&&oe.disconnect(),a.style.removeProperty("height"),o.removeEventListener("focusin",ie)},this.refresh=function(e,t){return T.refresh(e,t)},q&&(this.normalizer=u.normalizeScroll(!0===q?{debounce:!0,content:!K&&y}:q)),u.config(t),"scrollBehavior"in o.getComputedStyle(a)&&r.set([a,s],{scrollBehavior:"auto"}),o.addEventListener("focusin",ie),C=setInterval(Z,250),"loading"===i.readyState||requestAnimationFrame((function(){return u.refresh()}))}var b,S;return e.register=function(t){return n||(r=t||y(),m()&&window.document&&(o=window,i=document,s=i.documentElement,a=i.body),r&&(l=r.utils.toArray,c=r.utils.clamp,d=r.parseEase("expo"),g=r.core.context||function(){},u=r.core.globals().ScrollTrigger,r.core.globals("ScrollSmoother",e),a&&u&&(v=r.delayedCall(.2,(function(){return u.isRefreshing||f&&f.refresh()})).pause(),h=u.core._getVelocityProp,p=u.core._inputObserver,e.refresh=u.refresh,n=1))),n},b=e,(S=[{key:"progress",get:function(){return this.scrollTrigger?this.scrollTrigger.animation._time/100:0}}])&&t(b.prototype,S),e}();b.version="3.13.0",b.create=function(e){return f&&e&&f.content()===l(e.content)[0]?f:new b(e)},b.get=function(){return f},y()&&r.registerPlugin(b),e.ScrollSmoother=b,e.default=b,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete window.default}));