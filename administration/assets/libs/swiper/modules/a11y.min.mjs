import{g as e}from"../shared/ssr-window.esm.min.mjs";import{c as i}from"../shared/classes-to-selector.min.mjs";import{c as t,j as a,m as n,s}from"../shared/utils.min.mjs";function r({swiper:r,extendParams:o,on:l}){o({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0,wrapperLiveRegion:!0}}),r.a11y={clicked:!1};let d,c,p=null,g=(new Date).getTime();function u(e){const i=p;0!==i.length&&s(i,e)}function m(e){(e=n(e)).forEach((e=>{e.setAttribute("tabIndex","0")}))}function f(e){(e=n(e)).forEach((e=>{e.setAttribute("tabIndex","-1")}))}function v(e,i){(e=n(e)).forEach((e=>{e.setAttribute("role",i)}))}function b(e,i){(e=n(e)).forEach((e=>{e.setAttribute("aria-roledescription",i)}))}function E(e,i){(e=n(e)).forEach((e=>{e.setAttribute("aria-label",i)}))}function h(e){(e=n(e)).forEach((e=>{e.setAttribute("aria-disabled",!0)}))}function y(e){(e=n(e)).forEach((e=>{e.setAttribute("aria-disabled",!1)}))}function x(e){if(13!==e.keyCode&&32!==e.keyCode)return;const t=r.params.a11y,a=e.target;if(!r.pagination||!r.pagination.el||a!==r.pagination.el&&!r.pagination.el.contains(e.target)||e.target.matches(i(r.params.pagination.bulletClass))){if(r.navigation&&r.navigation.prevEl&&r.navigation.nextEl){const e=n(r.navigation.prevEl);n(r.navigation.nextEl).includes(a)&&(r.isEnd&&!r.params.loop||r.slideNext(),r.isEnd?u(t.lastSlideMessage):u(t.nextSlideMessage)),e.includes(a)&&(r.isBeginning&&!r.params.loop||r.slidePrev(),r.isBeginning?u(t.firstSlideMessage):u(t.prevSlideMessage))}r.pagination&&a.matches(i(r.params.pagination.bulletClass))&&a.click()}}function L(){return r.pagination&&r.pagination.bullets&&r.pagination.bullets.length}function M(){return L()&&r.params.pagination.clickable}const w=(e,i,t)=>{m(e),"BUTTON"!==e.tagName&&(v(e,"button"),e.addEventListener("keydown",x)),E(e,t),function(e,i){(e=n(e)).forEach((e=>{e.setAttribute("aria-controls",i)}))}(e,i)},A=e=>{c&&c!==e.target&&!c.contains(e.target)&&(d=!0),r.a11y.clicked=!0},k=()=>{d=!1,requestAnimationFrame((()=>{requestAnimationFrame((()=>{r.destroyed||(r.a11y.clicked=!1)}))}))},S=e=>{g=(new Date).getTime()},R=e=>{if(r.a11y.clicked||!r.params.a11y.scrollOnFocus)return;if((new Date).getTime()-g<100)return;const i=e.target.closest(`.${r.params.slideClass}, swiper-slide`);if(!i||!r.slides.includes(i))return;c=i;const t=r.slides.indexOf(i)===r.activeIndex,a=r.params.watchSlidesProgress&&r.visibleSlides&&r.visibleSlides.includes(i);t||a||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(r.isHorizontal()?r.el.scrollLeft=0:r.el.scrollTop=0,requestAnimationFrame((()=>{d||(r.params.loop?r.slideToLoop(r.getSlideIndexWhenGrid(parseInt(i.getAttribute("data-swiper-slide-index"))),0):r.slideTo(r.getSlideIndexWhenGrid(r.slides.indexOf(i)),0),d=!1)})))},C=()=>{const e=r.params.a11y;e.itemRoleDescriptionMessage&&b(r.slides,e.itemRoleDescriptionMessage),e.slideRole&&v(r.slides,e.slideRole);const i=r.slides.length;e.slideLabelMessage&&r.slides.forEach(((t,a)=>{const n=r.params.loop?parseInt(t.getAttribute("data-swiper-slide-index"),10):a;E(t,e.slideLabelMessage.replace(/\{\{index\}\}/,n+1).replace(/\{\{slidesLength\}\}/,i))}))};l("beforeInit",(()=>{p=t("span",r.params.a11y.notificationClass),p.setAttribute("aria-live","assertive"),p.setAttribute("aria-atomic","true")})),l("afterInit",(()=>{r.params.a11y.enabled&&(()=>{const i=r.params.a11y;r.el.append(p);const t=r.el;i.containerRoleDescriptionMessage&&b(t,i.containerRoleDescriptionMessage),i.containerMessage&&E(t,i.containerMessage),i.containerRole&&v(t,i.containerRole);const a=r.wrapperEl,s=i.id||a.getAttribute("id")||`swiper-wrapper-${function(e=16){return"x".repeat(e).replace(/x/g,(()=>Math.round(16*Math.random()).toString(16)))}(16)}`;var o;o=s,n(a).forEach((e=>{e.setAttribute("id",o)})),i.wrapperLiveRegion&&function(e,i){(e=n(e)).forEach((e=>{e.setAttribute("aria-live",i)}))}(a,r.params.autoplay&&r.params.autoplay.enabled?"off":"polite"),C();let{nextEl:l,prevEl:d}=r.navigation?r.navigation:{};l=n(l),d=n(d),l&&l.forEach((e=>w(e,s,i.nextSlideMessage))),d&&d.forEach((e=>w(e,s,i.prevSlideMessage))),M()&&n(r.pagination.el).forEach((e=>{e.addEventListener("keydown",x)})),e().addEventListener("visibilitychange",S),r.el.addEventListener("focus",R,!0),r.el.addEventListener("focus",R,!0),r.el.addEventListener("pointerdown",A,!0),r.el.addEventListener("pointerup",k,!0)})()})),l("slidesLengthChange snapGridLengthChange slidesGridLengthChange",(()=>{r.params.a11y.enabled&&C()})),l("fromEdge toEdge afterInit lock unlock",(()=>{r.params.a11y.enabled&&function(){if(r.params.loop||r.params.rewind||!r.navigation)return;const{nextEl:e,prevEl:i}=r.navigation;i&&(r.isBeginning?(h(i),f(i)):(y(i),m(i))),e&&(r.isEnd?(h(e),f(e)):(y(e),m(e)))}()})),l("paginationUpdate",(()=>{r.params.a11y.enabled&&function(){const e=r.params.a11y;L()&&r.pagination.bullets.forEach((t=>{r.params.pagination.clickable&&(m(t),r.params.pagination.renderBullet||(v(t,"button"),E(t,e.paginationBulletMessage.replace(/\{\{index\}\}/,a(t)+1)))),t.matches(i(r.params.pagination.bulletActiveClass))?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")}))}()})),l("destroy",(()=>{r.params.a11y.enabled&&function(){p&&p.remove();let{nextEl:i,prevEl:t}=r.navigation?r.navigation:{};i=n(i),t=n(t),i&&i.forEach((e=>e.removeEventListener("keydown",x))),t&&t.forEach((e=>e.removeEventListener("keydown",x))),M()&&n(r.pagination.el).forEach((e=>{e.removeEventListener("keydown",x)})),e().removeEventListener("visibilitychange",S),r.el&&"string"!=typeof r.el&&(r.el.removeEventListener("focus",R,!0),r.el.removeEventListener("pointerdown",A,!0),r.el.removeEventListener("pointerup",k,!0))}()}))}export{r as default};