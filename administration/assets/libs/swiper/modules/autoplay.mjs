import{g as e}from"../shared/ssr-window.esm.mjs";function a({swiper:a,extendParams:t,on:n,emit:i,params:r}){let o,s;a.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,p,u,d,y,m,c,v,g=r&&r.autoplay?r.autoplay.delay:3e3,T=r&&r.autoplay?r.autoplay.delay:3e3,f=(new Date).getTime();function w(e){a&&!a.destroyed&&a.wrapperEl&&e.target===a.wrapperEl&&(a.wrapperEl.removeEventListener("transitionend",w),v||e.detail&&e.detail.bySwiperTouchMove||M())}const b=()=>{if(a.destroyed||!a.autoplay.running)return;a.autoplay.paused?p=!0:p&&(T=l,p=!1);const e=a.autoplay.paused?l:f+T-(new Date).getTime();a.autoplay.timeLeft=e,i("autoplayTimeLeft",e,e/g),s=requestAnimationFrame((()=>{b()}))},E=e=>{if(a.destroyed||!a.autoplay.running)return;cancelAnimationFrame(s),b();let t=void 0===e?a.params.autoplay.delay:e;g=a.params.autoplay.delay,T=a.params.autoplay.delay;const n=(()=>{let e;if(e=a.virtual&&a.params.virtual.enabled?a.slides.find((e=>e.classList.contains("swiper-slide-active"))):a.slides[a.activeIndex],e)return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(n)&&n>0&&void 0===e&&(t=n,g=n,T=n),l=t;const r=a.params.speed,p=()=>{a&&!a.destroyed&&(a.params.autoplay.reverseDirection?!a.isBeginning||a.params.loop||a.params.rewind?(a.slidePrev(r,!0,!0),i("autoplay")):a.params.autoplay.stopOnLastSlide||(a.slideTo(a.slides.length-1,r,!0,!0),i("autoplay")):!a.isEnd||a.params.loop||a.params.rewind?(a.slideNext(r,!0,!0),i("autoplay")):a.params.autoplay.stopOnLastSlide||(a.slideTo(0,r,!0,!0),i("autoplay")),a.params.cssMode&&(f=(new Date).getTime(),requestAnimationFrame((()=>{E()}))))};return t>0?(clearTimeout(o),o=setTimeout((()=>{p()}),t)):requestAnimationFrame((()=>{p()})),t},L=()=>{f=(new Date).getTime(),a.autoplay.running=!0,E(),i("autoplayStart")},O=()=>{a.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(s),i("autoplayStop")},S=(e,t)=>{if(a.destroyed||!a.autoplay.running)return;clearTimeout(o),e||(c=!0);const n=()=>{i("autoplayPause"),a.params.autoplay.waitForTransition?a.wrapperEl.addEventListener("transitionend",w):M()};if(a.autoplay.paused=!0,t)return m&&(l=a.params.autoplay.delay),m=!1,void n();const r=l||a.params.autoplay.delay;l=r-((new Date).getTime()-f),a.isEnd&&l<0&&!a.params.loop||(l<0&&(l=0),n())},M=()=>{a.isEnd&&l<0&&!a.params.loop||a.destroyed||!a.autoplay.running||(f=(new Date).getTime(),c?(c=!1,E(l)):E(),a.autoplay.paused=!1,i("autoplayResume"))},h=()=>{if(a.destroyed||!a.autoplay.running)return;const t=e();"hidden"===t.visibilityState&&(c=!0,S(!0)),"visible"===t.visibilityState&&M()},D=e=>{"mouse"===e.pointerType&&(c=!0,v=!0,a.animating||a.autoplay.paused||S(!0))},F=e=>{"mouse"===e.pointerType&&(v=!1,a.autoplay.paused&&M())};n("init",(()=>{a.params.autoplay.enabled&&(a.params.autoplay.pauseOnMouseEnter&&(a.el.addEventListener("pointerenter",D),a.el.addEventListener("pointerleave",F)),e().addEventListener("visibilitychange",h),L())})),n("destroy",(()=>{a.el&&"string"!=typeof a.el&&(a.el.removeEventListener("pointerenter",D),a.el.removeEventListener("pointerleave",F)),e().removeEventListener("visibilitychange",h),a.autoplay.running&&O()})),n("_freeModeStaticRelease",(()=>{(d||c)&&M()})),n("_freeModeNoMomentumRelease",(()=>{a.params.autoplay.disableOnInteraction?O():S(!0,!0)})),n("beforeTransitionStart",((e,t,n)=>{!a.destroyed&&a.autoplay.running&&(n||!a.params.autoplay.disableOnInteraction?S(!0,!0):O())})),n("sliderFirstMove",(()=>{!a.destroyed&&a.autoplay.running&&(a.params.autoplay.disableOnInteraction?O():(u=!0,d=!1,c=!1,y=setTimeout((()=>{c=!0,d=!0,S(!0)}),200)))})),n("touchEnd",(()=>{if(!a.destroyed&&a.autoplay.running&&u){if(clearTimeout(y),clearTimeout(o),a.params.autoplay.disableOnInteraction)return d=!1,void(u=!1);d&&a.params.cssMode&&M(),d=!1,u=!1}})),n("slideChange",(()=>{!a.destroyed&&a.autoplay.running&&(m=!0)})),Object.assign(a.autoplay,{start:L,stop:O,pause:S,resume:M})}export{a as default};