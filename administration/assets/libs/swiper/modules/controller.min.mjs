import{n as t,o as r}from"../shared/utils.min.mjs";function e({swiper:e,extendParams:n,on:o}){function l(t,r){const e=function(){let t,r,e;return(n,o)=>{for(r=-1,t=n.length;t-r>1;)e=t+r>>1,n[e]<=o?r=e:t=e;return t}}();let n,o;return this.x=t,this.y=r,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(o=e(this.x,t),n=o-1,(t-this.x[n])*(this.y[o]-this.y[n])/(this.x[o]-this.x[n])+this.y[n]):0},this}function s(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0},o("beforeInit",(()=>{"undefined"!=typeof window&&("string"==typeof e.params.controller.control||e.params.controller.control instanceof HTMLElement)?("string"==typeof e.params.controller.control?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach((t=>{if(e.controller.control||(e.controller.control=[]),t&&t.swiper)e.controller.control.push(t.swiper);else if(t){const r=`${e.params.eventsPrefix}init`,n=o=>{e.controller.control.push(o.detail[0]),e.update(),t.removeEventListener(r,n)};t.addEventListener(r,n)}})):e.controller.control=e.params.controller.control})),o("update",(()=>{s()})),o("resize",(()=>{s()})),o("observerUpdate",(()=>{s()})),o("setTranslate",((t,r,n)=>{e.controller.control&&!e.controller.control.destroyed&&e.controller.setTranslate(r,n)})),o("setTransition",((t,r,n)=>{e.controller.control&&!e.controller.control.destroyed&&e.controller.setTransition(r,n)})),Object.assign(e.controller,{setTranslate:function(t,r){const n=e.controller.control;let o,s;const a=e.constructor;function i(t){if(t.destroyed)return;const r=e.rtlTranslate?-e.translate:e.translate;"slide"===e.params.controller.by&&(function(t){e.controller.spline=e.params.loop?new l(e.slidesGrid,t.slidesGrid):new l(e.snapGrid,t.snapGrid)}(t),s=-e.controller.spline.interpolate(-r)),s&&"container"!==e.params.controller.by||(o=(t.maxTranslate()-t.minTranslate())/(e.maxTranslate()-e.minTranslate()),!Number.isNaN(o)&&Number.isFinite(o)||(o=1),s=(r-e.minTranslate())*o+t.minTranslate()),e.params.controller.inverse&&(s=t.maxTranslate()-s),t.updateProgress(s),t.setTranslate(s,e),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(n))for(let t=0;t<n.length;t+=1)n[t]!==r&&n[t]instanceof a&&i(n[t]);else n instanceof a&&r!==n&&i(n)},setTransition:function(n,o){const l=e.constructor,s=e.controller.control;let a;function i(o){o.destroyed||(o.setTransition(n,e),0!==n&&(o.transitionStart(),o.params.autoHeight&&t((()=>{o.updateAutoHeight()})),r(o.wrapperEl,(()=>{s&&o.transitionEnd()}))))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==o&&s[a]instanceof l&&i(s[a]);else s instanceof l&&o!==s&&i(s)}})}export{e as default};