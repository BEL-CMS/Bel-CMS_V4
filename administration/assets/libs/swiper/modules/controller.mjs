import{n as t,o as r}from"../shared/utils.mjs";function e({swiper:e,extendParams:o,on:n}){function l(t,r){const e=function(){let t,r,e;return(o,n)=>{for(r=-1,t=o.length;t-r>1;)e=t+r>>1,o[e]<=n?r=e:t=e;return t}}();let o,n;return this.x=t,this.y=r,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(n=e(this.x,t),o=n-1,(t-this.x[o])*(this.y[n]-this.y[o])/(this.x[n]-this.x[o])+this.y[o]):0},this}function s(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}o({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0},n("beforeInit",(()=>{"undefined"!=typeof window&&("string"==typeof e.params.controller.control||e.params.controller.control instanceof HTMLElement)?("string"==typeof e.params.controller.control?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach((t=>{if(e.controller.control||(e.controller.control=[]),t&&t.swiper)e.controller.control.push(t.swiper);else if(t){const r=`${e.params.eventsPrefix}init`,o=n=>{e.controller.control.push(n.detail[0]),e.update(),t.removeEventListener(r,o)};t.addEventListener(r,o)}})):e.controller.control=e.params.controller.control})),n("update",(()=>{s()})),n("resize",(()=>{s()})),n("observerUpdate",(()=>{s()})),n("setTranslate",((t,r,o)=>{e.controller.control&&!e.controller.control.destroyed&&e.controller.setTranslate(r,o)})),n("setTransition",((t,r,o)=>{e.controller.control&&!e.controller.control.destroyed&&e.controller.setTransition(r,o)})),Object.assign(e.controller,{setTranslate:function(t,r){const o=e.controller.control;let n,s;const a=e.constructor;function i(t){if(t.destroyed)return;const r=e.rtlTranslate?-e.translate:e.translate;"slide"===e.params.controller.by&&(function(t){e.controller.spline=e.params.loop?new l(e.slidesGrid,t.slidesGrid):new l(e.snapGrid,t.snapGrid)}(t),s=-e.controller.spline.interpolate(-r)),s&&"container"!==e.params.controller.by||(n=(t.maxTranslate()-t.minTranslate())/(e.maxTranslate()-e.minTranslate()),!Number.isNaN(n)&&Number.isFinite(n)||(n=1),s=(r-e.minTranslate())*n+t.minTranslate()),e.params.controller.inverse&&(s=t.maxTranslate()-s),t.updateProgress(s),t.setTranslate(s,e),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(o))for(let t=0;t<o.length;t+=1)o[t]!==r&&o[t]instanceof a&&i(o[t]);else o instanceof a&&r!==o&&i(o)},setTransition:function(o,n){const l=e.constructor,s=e.controller.control;let a;function i(n){n.destroyed||(n.setTransition(o,e),0!==o&&(n.transitionStart(),n.params.autoHeight&&t((()=>{n.updateAutoHeight()})),r(n.wrapperEl,(()=>{s&&n.transitionEnd()}))))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==n&&s[a]instanceof l&&i(s[a]);else s instanceof l&&n!==s&&i(s)}})}export{e as default};