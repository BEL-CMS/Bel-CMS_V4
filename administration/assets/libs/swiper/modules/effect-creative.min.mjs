import{c as e}from"../shared/create-shadow.min.mjs";import{e as s}from"../shared/effect-init.min.mjs";import{e as t}from"../shared/effect-target.min.mjs";import{e as r}from"../shared/effect-virtual-transition-end.min.mjs";import{g as a,a as i}from"../shared/utils.min.mjs";function o({swiper:o,extendParams:l,on:n}){l({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const c=e=>"string"==typeof e?e:`${e}px`;s({effect:"creative",swiper:o,on:n,setTranslate:()=>{const{slides:s,wrapperEl:r,slidesSizesGrid:a}=o,l=o.params.creativeEffect,{progressMultiplier:n}=l,m=o.params.centeredSlides,p=i(o);if(m){const e=a[0]/2-o.params.slidesOffsetBefore||0;r.style.transform=`translateX(calc(50% - ${e}px))`}for(let r=0;r<s.length;r+=1){const a=s[r],i=a.progress,f=Math.min(Math.max(a.progress,-l.limitProgress),l.limitProgress);let d=f;m||(d=Math.min(Math.max(a.originalProgress,-l.limitProgress),l.limitProgress));const h=a.swiperSlideOffset,g=[o.params.cssMode?-h-o.translate:-h,0,0],y=[0,0,0];let w=!1;o.isHorizontal()||(g[1]=g[0],g[0]=0);let M={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};f<0?(M=l.next,w=!0):f>0&&(M=l.prev,w=!0),g.forEach(((e,s)=>{g[s]=`calc(${e}px + (${c(M.translate[s])} * ${Math.abs(f*n)}))`})),y.forEach(((e,s)=>{let t=M.rotate[s]*Math.abs(f*n);y[s]=t})),a.style.zIndex=-Math.abs(Math.round(i))+s.length;const $=g.join(", "),P=`rotateX(${p(y[0])}deg) rotateY(${p(y[1])}deg) rotateZ(${p(y[2])}deg)`,u=d<0?`scale(${1+(1-M.scale)*d*n})`:`scale(${1-(1-M.scale)*d*n})`,v=d<0?1+(1-M.opacity)*d*n:1-(1-M.opacity)*d*n,x=`translate3d(${$}) ${P} ${u}`;if(w&&M.shadow||!w){let s=a.querySelector(".swiper-slide-shadow");if(!s&&M.shadow&&(s=e("creative",a)),s){const e=l.shadowPerProgress?f*(1/l.limitProgress):f;s.style.opacity=Math.min(Math.max(Math.abs(e),0),1)}}const E=t(l,a);E.style.transform=x,E.style.opacity=v,M.origin&&(E.style.transformOrigin=M.origin)}},setTransition:e=>{const s=o.slides.map((e=>a(e)));s.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),r({swiper:o,duration:e,transformElements:s,allSlides:!0})},perspective:()=>o.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!o.params.cssMode})})}export{o as default};