import{e}from"../shared/effect-init.min.mjs";import{c as s,a as t}from"../shared/utils.min.mjs";function a({swiper:a,extendParams:r,on:o}){r({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const i=(e,t,a)=>{let r=a?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),o=a?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");r||(r=s("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(a?"left":"top")).split(" ")),e.append(r)),o||(o=s("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(a?"right":"bottom")).split(" ")),e.append(o)),r&&(r.style.opacity=Math.max(-t,0)),o&&(o.style.opacity=Math.max(t,0))};e({effect:"cube",swiper:a,on:o,setTranslate:()=>{const{el:e,wrapperEl:r,slides:o,width:l,height:d,rtlTranslate:p,size:n,browser:w}=a,h=t(a),c=a.params.cubeEffect,f=a.isHorizontal(),m=a.virtual&&a.params.virtual.enabled;let u,y=0;c.shadow&&(f?(u=a.wrapperEl.querySelector(".swiper-cube-shadow"),u||(u=s("div","swiper-cube-shadow"),a.wrapperEl.append(u)),u.style.height=`${l}px`):(u=e.querySelector(".swiper-cube-shadow"),u||(u=s("div","swiper-cube-shadow"),e.append(u))));for(let e=0;e<o.length;e+=1){const s=o[e];let t=e;m&&(t=parseInt(s.getAttribute("data-swiper-slide-index"),10));let a=90*t,r=Math.floor(a/360);p&&(a=-a,r=Math.floor(-a/360));const l=Math.max(Math.min(s.progress,1),-1);let d=0,w=0,u=0;t%4==0?(d=4*-r*n,u=0):(t-1)%4==0?(d=0,u=4*-r*n):(t-2)%4==0?(d=n+4*r*n,u=n):(t-3)%4==0&&(d=-n,u=3*n+4*n*r),p&&(d=-d),f||(w=d,d=0);const b=`rotateX(${h(f?0:-a)}deg) rotateY(${h(f?a:0)}deg) translate3d(${d}px, ${w}px, ${u}px)`;l<=1&&l>-1&&(y=90*t+90*l,p&&(y=90*-t-90*l)),s.style.transform=b,c.slideShadows&&i(s,l,f)}if(r.style.transformOrigin=`50% 50% -${n/2}px`,r.style["-webkit-transform-origin"]=`50% 50% -${n/2}px`,c.shadow)if(f)u.style.transform=`translate3d(0px, ${l/2+c.shadowOffset}px, ${-l/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${c.shadowScale})`;else{const e=Math.abs(y)-90*Math.floor(Math.abs(y)/90),s=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),t=c.shadowScale,a=c.shadowScale/s,r=c.shadowOffset;u.style.transform=`scale3d(${t}, 1, ${a}) translate3d(0px, ${d/2+r}px, ${-d/2/a}px) rotateX(-89.99deg)`}const b=(w.isSafari||w.isWebView)&&w.needPerspectiveFix?-n/2:0;r.style.transform=`translate3d(0px,0,${b}px) rotateX(${h(a.isHorizontal()?0:y)}deg) rotateY(${h(a.isHorizontal()?-y:0)}deg)`,r.style.setProperty("--swiper-cube-translate-z",`${b}px`)},setTransition:e=>{const{el:s,slides:t}=a;if(t.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),a.params.cubeEffect.shadow&&!a.isHorizontal()){const t=s.querySelector(".swiper-cube-shadow");t&&(t.style.transitionDuration=`${e}ms`)}},recreateShadows:()=>{const e=a.isHorizontal();a.slides.forEach((s=>{const t=Math.max(Math.min(s.progress,1),-1);i(s,t,e)}))},getEffectParams:()=>a.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}export{a as default};