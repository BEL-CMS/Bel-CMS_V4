import{c as e}from"../shared/create-shadow.min.mjs";import{e as s}from"../shared/effect-init.min.mjs";import{e as t}from"../shared/effect-target.min.mjs";import{e as r}from"../shared/effect-virtual-transition-end.min.mjs";import{g as a,a as i}from"../shared/utils.min.mjs";function o({swiper:o,extendParams:l,on:n}){l({flipEffect:{slideShadows:!0,limitRotation:!0}});const p=(s,t)=>{let r=o.isHorizontal()?s.querySelector(".swiper-slide-shadow-left"):s.querySelector(".swiper-slide-shadow-top"),a=o.isHorizontal()?s.querySelector(".swiper-slide-shadow-right"):s.querySelector(".swiper-slide-shadow-bottom");r||(r=e("flip",s,o.isHorizontal()?"left":"top")),a||(a=e("flip",s,o.isHorizontal()?"right":"bottom")),r&&(r.style.opacity=Math.max(-t,0)),a&&(a.style.opacity=Math.max(t,0))};s({effect:"flip",swiper:o,on:n,setTranslate:()=>{const{slides:e,rtlTranslate:s}=o,r=o.params.flipEffect,a=i(o);for(let i=0;i<e.length;i+=1){const l=e[i];let n=l.progress;o.params.flipEffect.limitRotation&&(n=Math.max(Math.min(l.progress,1),-1));const f=l.swiperSlideOffset;let m=-180*n,d=0,c=o.params.cssMode?-f-o.translate:-f,h=0;o.isHorizontal()?s&&(m=-m):(h=c,c=0,d=-m,m=0),l.style.zIndex=-Math.abs(Math.round(n))+e.length,r.slideShadows&&p(l,n);const w=`translate3d(${c}px, ${h}px, 0px) rotateX(${a(d)}deg) rotateY(${a(m)}deg)`;t(r,l).style.transform=w}},setTransition:e=>{const s=o.slides.map((e=>a(e)));s.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),r({swiper:o,duration:e,transformElements:s})},recreateShadows:()=>{o.params.flipEffect,o.slides.forEach((e=>{let s=e.progress;o.params.flipEffect.limitRotation&&(s=Math.max(Math.min(e.progress,1),-1)),p(e,s)}))},getEffectParams:()=>o.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!o.params.cssMode})})}export{o as default};