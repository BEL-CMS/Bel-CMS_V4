import{c as e}from"../shared/create-shadow.mjs";import{e as s}from"../shared/effect-init.mjs";import{e as t}from"../shared/effect-target.mjs";import{e as r}from"../shared/effect-virtual-transition-end.mjs";import{g as a,a as i}from"../shared/utils.mjs";function o({swiper:o,extendParams:l,on:p}){l({flipEffect:{slideShadows:!0,limitRotation:!0}});const f=(s,t)=>{let r=o.isHorizontal()?s.querySelector(".swiper-slide-shadow-left"):s.querySelector(".swiper-slide-shadow-top"),a=o.isHorizontal()?s.querySelector(".swiper-slide-shadow-right"):s.querySelector(".swiper-slide-shadow-bottom");r||(r=e("flip",s,o.isHorizontal()?"left":"top")),a||(a=e("flip",s,o.isHorizontal()?"right":"bottom")),r&&(r.style.opacity=Math.max(-t,0)),a&&(a.style.opacity=Math.max(t,0))};s({effect:"flip",swiper:o,on:p,setTranslate:()=>{const{slides:e,rtlTranslate:s}=o,r=o.params.flipEffect,a=i(o);for(let i=0;i<e.length;i+=1){const l=e[i];let p=l.progress;o.params.flipEffect.limitRotation&&(p=Math.max(Math.min(l.progress,1),-1));const n=l.swiperSlideOffset;let d=-180*p,m=0,c=o.params.cssMode?-n-o.translate:-n,h=0;o.isHorizontal()?s&&(d=-d):(h=c,c=0,m=-d,d=0),l.style.zIndex=-Math.abs(Math.round(p))+e.length,r.slideShadows&&f(l,p);const w=`translate3d(${c}px, ${h}px, 0px) rotateX(${a(m)}deg) rotateY(${a(d)}deg)`;t(r,l).style.transform=w}},setTransition:e=>{const s=o.slides.map((e=>a(e)));s.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),r({swiper:o,duration:e,transformElements:s})},recreateShadows:()=>{o.params.flipEffect,o.slides.forEach((e=>{let s=e.progress;o.params.flipEffect.limitRotation&&(s=Math.max(Math.min(e.progress,1),-1)),f(e,s)}))},getEffectParams:()=>o.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!o.params.cssMode})})}export{o as default};