import{g as a,a as e}from"../shared/ssr-window.esm.min.mjs";import{e as t}from"../shared/utils.min.mjs";function s({swiper:s,extendParams:i,emit:r,on:n}){let h=!1;const d=a(),l=e();i({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(a,e){if(s.virtual&&s.params.virtual.enabled){const a=s.slides.find((a=>a.getAttribute("data-hash")===e));return a?parseInt(a.getAttribute("data-swiper-slide-index"),10):0}return s.getSlideIndex(t(s.slidesEl,`.${s.params.slideClass}[data-hash="${e}"], swiper-slide[data-hash="${e}"]`)[0])}}});const o=()=>{r("hashChange");const a=d.location.hash.replace("#",""),e=s.virtual&&s.params.virtual.enabled?s.slidesEl.querySelector(`[data-swiper-slide-index="${s.activeIndex}"]`):s.slides[s.activeIndex];if(a!==(e?e.getAttribute("data-hash"):"")){const e=s.params.hashNavigation.getSlideIndex(s,a);if(void 0===e||Number.isNaN(e))return;s.slideTo(e)}},m=()=>{if(!h||!s.params.hashNavigation.enabled)return;const a=s.virtual&&s.params.virtual.enabled?s.slidesEl.querySelector(`[data-swiper-slide-index="${s.activeIndex}"]`):s.slides[s.activeIndex],e=a?a.getAttribute("data-hash")||a.getAttribute("data-history"):"";s.params.hashNavigation.replaceState&&l.history&&l.history.replaceState?(l.history.replaceState(null,null,`#${e}`||""),r("hashSet")):(d.location.hash=e||"",r("hashSet"))};n("init",(()=>{s.params.hashNavigation.enabled&&(()=>{if(!s.params.hashNavigation.enabled||s.params.history&&s.params.history.enabled)return;h=!0;const a=d.location.hash.replace("#","");if(a){const e=0,t=s.params.hashNavigation.getSlideIndex(s,a);s.slideTo(t||0,e,s.params.runCallbacksOnInit,!0)}s.params.hashNavigation.watchState&&l.addEventListener("hashchange",o)})()})),n("destroy",(()=>{s.params.hashNavigation.enabled&&s.params.hashNavigation.watchState&&l.removeEventListener("hashchange",o)})),n("transitionEnd _freeModeNoMomentumRelease",(()=>{h&&m()})),n("slideChange",(()=>{h&&s.params.cssMode&&m()}))}export{s as default};