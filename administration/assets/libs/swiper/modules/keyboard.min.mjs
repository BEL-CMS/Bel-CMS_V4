import{g as e,a as t}from"../shared/ssr-window.esm.min.mjs";import{d as n,f as a}from"../shared/utils.min.mjs";function r({swiper:r,extendParams:i,on:l,emit:o}){const s=e(),d=t();function f(e){if(!r.enabled)return;const{rtlTranslate:t}=r;let i=e;i.originalEvent&&(i=i.originalEvent);const l=i.keyCode||i.charCode,f=r.params.keyboard.pageUpDown,m=f&&33===l,c=f&&34===l,p=37===l,b=39===l,y=38===l,u=40===l;if(!r.allowSlideNext&&(r.isHorizontal()&&b||r.isVertical()&&u||c))return!1;if(!r.allowSlidePrev&&(r.isHorizontal()&&p||r.isVertical()&&y||m))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||s.activeElement&&(s.activeElement.isContentEditable||s.activeElement.nodeName&&("input"===s.activeElement.nodeName.toLowerCase()||"textarea"===s.activeElement.nodeName.toLowerCase())))){if(r.params.keyboard.onlyInViewport&&(m||c||p||b||y||u)){let e=!1;if(n(r.el,`.${r.params.slideClass}, swiper-slide`).length>0&&0===n(r.el,`.${r.params.slideActiveClass}`).length)return;const i=r.el,l=i.clientWidth,o=i.clientHeight,s=d.innerWidth,f=d.innerHeight,m=a(i);t&&(m.left-=i.scrollLeft);const c=[[m.left,m.top],[m.left+l,m.top],[m.left,m.top+o],[m.left+l,m.top+o]];for(let t=0;t<c.length;t+=1){const n=c[t];if(n[0]>=0&&n[0]<=s&&n[1]>=0&&n[1]<=f){if(0===n[0]&&0===n[1])continue;e=!0}}if(!e)return}r.isHorizontal()?((m||c||p||b)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),((c||b)&&!t||(m||p)&&t)&&r.slideNext(),((m||p)&&!t||(c||b)&&t)&&r.slidePrev()):((m||c||y||u)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),(c||u)&&r.slideNext(),(m||y)&&r.slidePrev()),o("keyPress",l)}}function m(){r.keyboard.enabled||(s.addEventListener("keydown",f),r.keyboard.enabled=!0)}function c(){r.keyboard.enabled&&(s.removeEventListener("keydown",f),r.keyboard.enabled=!1)}r.keyboard={enabled:!1},i({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),l("init",(()=>{r.params.keyboard.enabled&&m()})),l("destroy",(()=>{r.keyboard.enabled&&c()})),Object.assign(r.keyboard,{enable:m,disable:c})}export{r as default};