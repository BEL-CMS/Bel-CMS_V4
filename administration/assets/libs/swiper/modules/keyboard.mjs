import{g as e,a as t}from"../shared/ssr-window.esm.mjs";import{d as a,f as n}from"../shared/utils.mjs";function r({swiper:r,extendParams:l,on:i,emit:o}){const s=e(),d=t();function f(e){if(!r.enabled)return;const{rtlTranslate:t}=r;let l=e;l.originalEvent&&(l=l.originalEvent);const i=l.keyCode||l.charCode,f=r.params.keyboard.pageUpDown,c=f&&33===i,p=f&&34===i,b=37===i,m=39===i,y=38===i,u=40===i;if(!r.allowSlideNext&&(r.isHorizontal()&&m||r.isVertical()&&u||p))return!1;if(!r.allowSlidePrev&&(r.isHorizontal()&&b||r.isVertical()&&y||c))return!1;if(!(l.shiftKey||l.altKey||l.ctrlKey||l.metaKey||s.activeElement&&(s.activeElement.isContentEditable||s.activeElement.nodeName&&("input"===s.activeElement.nodeName.toLowerCase()||"textarea"===s.activeElement.nodeName.toLowerCase())))){if(r.params.keyboard.onlyInViewport&&(c||p||b||m||y||u)){let e=!1;if(a(r.el,`.${r.params.slideClass}, swiper-slide`).length>0&&0===a(r.el,`.${r.params.slideActiveClass}`).length)return;const l=r.el,i=l.clientWidth,o=l.clientHeight,s=d.innerWidth,f=d.innerHeight,c=n(l);t&&(c.left-=l.scrollLeft);const p=[[c.left,c.top],[c.left+i,c.top],[c.left,c.top+o],[c.left+i,c.top+o]];for(let t=0;t<p.length;t+=1){const a=p[t];if(a[0]>=0&&a[0]<=s&&a[1]>=0&&a[1]<=f){if(0===a[0]&&0===a[1])continue;e=!0}}if(!e)return}r.isHorizontal()?((c||p||b||m)&&(l.preventDefault?l.preventDefault():l.returnValue=!1),((p||m)&&!t||(c||b)&&t)&&r.slideNext(),((c||b)&&!t||(p||m)&&t)&&r.slidePrev()):((c||p||y||u)&&(l.preventDefault?l.preventDefault():l.returnValue=!1),(p||u)&&r.slideNext(),(c||y)&&r.slidePrev()),o("keyPress",i)}}function c(){r.keyboard.enabled||(s.addEventListener("keydown",f),r.keyboard.enabled=!0)}function p(){r.keyboard.enabled&&(s.removeEventListener("keydown",f),r.keyboard.enabled=!1)}r.keyboard={enabled:!1},l({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),i("init",(()=>{r.params.keyboard.enabled&&c()})),i("destroy",(()=>{r.keyboard.enabled&&p()})),Object.assign(r.keyboard,{enable:c,disable:p})}export{r as default};