import{c as a}from"../shared/classes-to-selector.mjs";import{c as e}from"../shared/create-element-if-not-defined.mjs";import{m as s,i as l,j as t,s as i,d as n}from"../shared/utils.mjs";function r({swiper:r,extendParams:o,on:p,emit:c}){const d="swiper-pagination";let u;o({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),r.pagination={el:null,bullets:[]};let g=0;function m(){return!r.params.pagination.el||!r.pagination.el||Array.isArray(r.pagination.el)&&0===r.pagination.el.length}function b(a,e){const{bulletActiveClass:s}=r.params.pagination;a&&(a=a[("prev"===e?"previous":"next")+"ElementSibling"])&&(a.classList.add(`${s}-${e}`),(a=a[("prev"===e?"previous":"next")+"ElementSibling"])&&a.classList.add(`${s}-${e}-${e}`))}function h(e){const s=e.target.closest(a(r.params.pagination.bulletClass));if(!s)return;e.preventDefault();const l=t(s)*r.params.slidesPerGroup;if(r.params.loop){if(r.realIndex===l)return;const a=(i=r.realIndex,n=l,(n%=o=r.slides.length)==1+(i%=o)?"next":n===i-1?"previous":void 0);"next"===a?r.slideNext():"previous"===a?r.slidePrev():r.slideToLoop(l)}else r.slideTo(l);var i,n,o}function f(){const e=r.rtl,n=r.params.pagination;if(m())return;let o,p,d=r.pagination.el;d=s(d);const h=r.virtual&&r.params.virtual.enabled?r.virtual.slides.length:r.slides.length,f=r.params.loop?Math.ceil(h/r.params.slidesPerGroup):r.snapGrid.length;if(r.params.loop?(p=r.previousRealIndex||0,o=r.params.slidesPerGroup>1?Math.floor(r.realIndex/r.params.slidesPerGroup):r.realIndex):void 0!==r.snapIndex?(o=r.snapIndex,p=r.previousSnapIndex):(p=r.previousIndex||0,o=r.activeIndex||0),"bullets"===n.type&&r.pagination.bullets&&r.pagination.bullets.length>0){const a=r.pagination.bullets;let s,i,c;if(n.dynamicBullets&&(u=l(a[0],r.isHorizontal()?"width":"height",!0),d.forEach((a=>{a.style[r.isHorizontal()?"width":"height"]=u*(n.dynamicMainBullets+4)+"px"})),n.dynamicMainBullets>1&&void 0!==p&&(g+=o-(p||0),g>n.dynamicMainBullets-1?g=n.dynamicMainBullets-1:g<0&&(g=0)),s=Math.max(o-g,0),i=s+(Math.min(a.length,n.dynamicMainBullets)-1),c=(i+s)/2),a.forEach((a=>{const e=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((a=>`${n.bulletActiveClass}${a}`))].map((a=>"string"==typeof a&&a.includes(" ")?a.split(" "):a)).flat();a.classList.remove(...e)})),d.length>1)a.forEach((a=>{const e=t(a);e===o?a.classList.add(...n.bulletActiveClass.split(" ")):r.isElement&&a.setAttribute("part","bullet"),n.dynamicBullets&&(e>=s&&e<=i&&a.classList.add(...`${n.bulletActiveClass}-main`.split(" ")),e===s&&b(a,"prev"),e===i&&b(a,"next"))}));else{const e=a[o];if(e&&e.classList.add(...n.bulletActiveClass.split(" ")),r.isElement&&a.forEach(((a,e)=>{a.setAttribute("part",e===o?"bullet-active":"bullet")})),n.dynamicBullets){const e=a[s],l=a[i];for(let e=s;e<=i;e+=1)a[e]&&a[e].classList.add(...`${n.bulletActiveClass}-main`.split(" "));b(e,"prev"),b(l,"next")}}if(n.dynamicBullets){const s=Math.min(a.length,n.dynamicMainBullets+4),l=(u*s-u)/2-c*u,t=e?"right":"left";a.forEach((a=>{a.style[r.isHorizontal()?t:"top"]=`${l}px`}))}}d.forEach(((e,s)=>{if("fraction"===n.type&&(e.querySelectorAll(a(n.currentClass)).forEach((a=>{a.textContent=n.formatFractionCurrent(o+1)})),e.querySelectorAll(a(n.totalClass)).forEach((a=>{a.textContent=n.formatFractionTotal(f)}))),"progressbar"===n.type){let s;s=n.progressbarOpposite?r.isHorizontal()?"vertical":"horizontal":r.isHorizontal()?"horizontal":"vertical";const l=(o+1)/f;let t=1,i=1;"horizontal"===s?t=l:i=l,e.querySelectorAll(a(n.progressbarFillClass)).forEach((a=>{a.style.transform=`translate3d(0,0,0) scaleX(${t}) scaleY(${i})`,a.style.transitionDuration=`${r.params.speed}ms`}))}"custom"===n.type&&n.renderCustom?(i(e,n.renderCustom(r,o+1,f)),0===s&&c("paginationRender",e)):(0===s&&c("paginationRender",e),c("paginationUpdate",e)),r.params.watchOverflow&&r.enabled&&e.classList[r.isLocked?"add":"remove"](n.lockClass)}))}function v(){const e=r.params.pagination;if(m())return;const l=r.virtual&&r.params.virtual.enabled?r.virtual.slides.length:r.grid&&r.params.grid.rows>1?r.slides.length/Math.ceil(r.params.grid.rows):r.slides.length;let t=r.pagination.el;t=s(t);let n="";if("bullets"===e.type){let a=r.params.loop?Math.ceil(l/r.params.slidesPerGroup):r.snapGrid.length;r.params.freeMode&&r.params.freeMode.enabled&&a>l&&(a=l);for(let s=0;s<a;s+=1)e.renderBullet?n+=e.renderBullet.call(r,s,e.bulletClass):n+=`<${e.bulletElement} ${r.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(n=e.renderFraction?e.renderFraction.call(r,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(n=e.renderProgressbar?e.renderProgressbar.call(r,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),r.pagination.bullets=[],t.forEach((s=>{"custom"!==e.type&&i(s,n||""),"bullets"===e.type&&r.pagination.bullets.push(...s.querySelectorAll(a(e.bulletClass)))})),"custom"!==e.type&&c("paginationRender",t[0])}function C(){r.params.pagination=e(r,r.originalParams.pagination,r.params.pagination,{el:"swiper-pagination"});const a=r.params.pagination;if(!a.el)return;let l;"string"==typeof a.el&&r.isElement&&(l=r.el.querySelector(a.el)),l||"string"!=typeof a.el||(l=[...document.querySelectorAll(a.el)]),l||(l=a.el),l&&0!==l.length&&(r.params.uniqueNavElements&&"string"==typeof a.el&&Array.isArray(l)&&l.length>1&&(l=[...r.el.querySelectorAll(a.el)],l.length>1&&(l=l.find((a=>n(a,".swiper")[0]===r.el)))),Array.isArray(l)&&1===l.length&&(l=l[0]),Object.assign(r.pagination,{el:l}),l=s(l),l.forEach((e=>{"bullets"===a.type&&a.clickable&&e.classList.add(...(a.clickableClass||"").split(" ")),e.classList.add(a.modifierClass+a.type),e.classList.add(r.isHorizontal()?a.horizontalClass:a.verticalClass),"bullets"===a.type&&a.dynamicBullets&&(e.classList.add(`${a.modifierClass}${a.type}-dynamic`),g=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),"progressbar"===a.type&&a.progressbarOpposite&&e.classList.add(a.progressbarOppositeClass),a.clickable&&e.addEventListener("click",h),r.enabled||e.classList.add(a.lockClass)})))}function y(){const a=r.params.pagination;if(m())return;let e=r.pagination.el;e&&(e=s(e),e.forEach((e=>{e.classList.remove(a.hiddenClass),e.classList.remove(a.modifierClass+a.type),e.classList.remove(r.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(e.classList.remove(...(a.clickableClass||"").split(" ")),e.removeEventListener("click",h))}))),r.pagination.bullets&&r.pagination.bullets.forEach((e=>e.classList.remove(...a.bulletActiveClass.split(" "))))}p("changeDirection",(()=>{if(!r.pagination||!r.pagination.el)return;const a=r.params.pagination;let{el:e}=r.pagination;e=s(e),e.forEach((e=>{e.classList.remove(a.horizontalClass,a.verticalClass),e.classList.add(r.isHorizontal()?a.horizontalClass:a.verticalClass)}))})),p("init",(()=>{!1===r.params.pagination.enabled?$():(C(),v(),f())})),p("activeIndexChange",(()=>{void 0===r.snapIndex&&f()})),p("snapIndexChange",(()=>{f()})),p("snapGridLengthChange",(()=>{v(),f()})),p("destroy",(()=>{y()})),p("enable disable",(()=>{let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList[r.enabled?"remove":"add"](r.params.pagination.lockClass))))})),p("lock unlock",(()=>{f()})),p("click",((a,e)=>{const l=e.target,t=s(r.pagination.el);if(r.params.pagination.el&&r.params.pagination.hideOnClick&&t&&t.length>0&&!l.classList.contains(r.params.pagination.bulletClass)){if(r.navigation&&(r.navigation.nextEl&&l===r.navigation.nextEl||r.navigation.prevEl&&l===r.navigation.prevEl))return;const a=t[0].classList.contains(r.params.pagination.hiddenClass);c(!0===a?"paginationShow":"paginationHide"),t.forEach((a=>a.classList.toggle(r.params.pagination.hiddenClass)))}}));const $=()=>{r.el.classList.add(r.params.pagination.paginationDisabledClass);let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList.add(r.params.pagination.paginationDisabledClass)))),y()};Object.assign(r.pagination,{enable:()=>{r.el.classList.remove(r.params.pagination.paginationDisabledClass);let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList.remove(r.params.pagination.paginationDisabledClass)))),C(),v(),f()},disable:$,render:v,update:f,init:C,destroy:y})}export{r as default};