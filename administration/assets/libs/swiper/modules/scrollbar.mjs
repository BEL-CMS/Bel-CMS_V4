import{g as l}from"../shared/ssr-window.esm.mjs";import{m as s,k as r,c as a,n as e,f as t}from"../shared/utils.mjs";import{c as o}from"../shared/create-element-if-not-defined.mjs";import{c as i}from"../shared/classes-to-selector.mjs";function n({swiper:n,extendParams:c,on:p,emit:d}){const b=l();let m,u,f,g,y=!1,h=null,v=null;function C(){if(!n.params.scrollbar.el||!n.scrollbar.el)return;const{scrollbar:l,rtlTranslate:s}=n,{dragEl:r,el:a}=l,e=n.params.scrollbar,t=n.params.loop?n.progressLoop:n.progress;let o=u,i=(f-u)*t;s?(i=-i,i>0?(o=u-i,i=0):-i+u>f&&(o=f+i)):i<0?(o=u+i,i=0):i+u>f&&(o=f-i),n.isHorizontal()?(r.style.transform=`translate3d(${i}px, 0, 0)`,r.style.width=`${o}px`):(r.style.transform=`translate3d(0px, ${i}px, 0)`,r.style.height=`${o}px`),e.hide&&(clearTimeout(h),a.style.opacity=1,h=setTimeout((()=>{a.style.opacity=0,a.style.transitionDuration="400ms"}),1e3))}function D(){if(!n.params.scrollbar.el||!n.scrollbar.el)return;const{scrollbar:l}=n,{dragEl:s,el:r}=l;s.style.width="",s.style.height="",f=n.isHorizontal()?r.offsetWidth:r.offsetHeight,g=n.size/(n.virtualSize+n.params.slidesOffsetBefore-(n.params.centeredSlides?n.snapGrid[0]:0)),u="auto"===n.params.scrollbar.dragSize?f*g:parseInt(n.params.scrollbar.dragSize,10),n.isHorizontal()?s.style.width=`${u}px`:s.style.height=`${u}px`,r.style.display=g>=1?"none":"",n.params.scrollbar.hide&&(r.style.opacity=0),n.params.watchOverflow&&n.enabled&&l.el.classList[n.isLocked?"add":"remove"](n.params.scrollbar.lockClass)}function z(l){return n.isHorizontal()?l.clientX:l.clientY}function w(l){const{scrollbar:s,rtlTranslate:r}=n,{el:a}=s;let e;e=(z(l)-t(a)[n.isHorizontal()?"left":"top"]-(null!==m?m:u/2))/(f-u),e=Math.max(Math.min(e,1),0),r&&(e=1-e);const o=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*e;n.updateProgress(o),n.setTranslate(o),n.updateActiveIndex(),n.updateSlidesClasses()}function E(l){const s=n.params.scrollbar,{scrollbar:r,wrapperEl:a}=n,{el:e,dragEl:t}=r;y=!0,m=l.target===t?z(l)-l.target.getBoundingClientRect()[n.isHorizontal()?"left":"top"]:null,l.preventDefault(),l.stopPropagation(),a.style.transitionDuration="100ms",t.style.transitionDuration="100ms",w(l),clearTimeout(v),e.style.transitionDuration="0ms",s.hide&&(e.style.opacity=1),n.params.cssMode&&(n.wrapperEl.style["scroll-snap-type"]="none"),d("scrollbarDragStart",l)}function L(l){const{scrollbar:s,wrapperEl:r}=n,{el:a,dragEl:e}=s;y&&(l.preventDefault&&l.cancelable?l.preventDefault():l.returnValue=!1,w(l),r.style.transitionDuration="0ms",a.style.transitionDuration="0ms",e.style.transitionDuration="0ms",d("scrollbarDragMove",l))}function T(l){const s=n.params.scrollbar,{scrollbar:r,wrapperEl:a}=n,{el:t}=r;y&&(y=!1,n.params.cssMode&&(n.wrapperEl.style["scroll-snap-type"]="",a.style.transitionDuration=""),s.hide&&(clearTimeout(v),v=e((()=>{t.style.opacity=0,t.style.transitionDuration="400ms"}),1e3)),d("scrollbarDragEnd",l),s.snapOnRelease&&n.slideToClosest())}function S(l){const{scrollbar:s,params:r}=n,a=s.el;if(!a)return;const e=a,t=!!r.passiveListeners&&{passive:!1,capture:!1},o=!!r.passiveListeners&&{passive:!0,capture:!1};if(!e)return;const i="on"===l?"addEventListener":"removeEventListener";e[i]("pointerdown",E,t),b[i]("pointermove",L,t),b[i]("pointerup",T,o)}function x(){const{scrollbar:l,el:s}=n;n.params.scrollbar=o(n,n.originalParams.scrollbar,n.params.scrollbar,{el:"swiper-scrollbar"});const e=n.params.scrollbar;if(!e.el)return;let t,c;if("string"==typeof e.el&&n.isElement&&(t=n.el.querySelector(e.el)),t||"string"!=typeof e.el)t||(t=e.el);else if(t=b.querySelectorAll(e.el),!t.length)return;n.params.uniqueNavElements&&"string"==typeof e.el&&t.length>1&&1===s.querySelectorAll(e.el).length&&(t=s.querySelector(e.el)),t.length>0&&(t=t[0]),t.classList.add(n.isHorizontal()?e.horizontalClass:e.verticalClass),t&&(c=t.querySelector(i(n.params.scrollbar.dragClass)),c||(c=a("div",n.params.scrollbar.dragClass),t.append(c))),Object.assign(l,{el:t,dragEl:c}),e.draggable&&n.params.scrollbar.el&&n.scrollbar.el&&S("on"),t&&t.classList[n.enabled?"remove":"add"](...r(n.params.scrollbar.lockClass))}function H(){const l=n.params.scrollbar,s=n.scrollbar.el;s&&s.classList.remove(...r(n.isHorizontal()?l.horizontalClass:l.verticalClass)),n.params.scrollbar.el&&n.scrollbar.el&&S("off")}c({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),n.scrollbar={el:null,dragEl:null},p("changeDirection",(()=>{if(!n.scrollbar||!n.scrollbar.el)return;const l=n.params.scrollbar;let{el:r}=n.scrollbar;r=s(r),r.forEach((s=>{s.classList.remove(l.horizontalClass,l.verticalClass),s.classList.add(n.isHorizontal()?l.horizontalClass:l.verticalClass)}))})),p("init",(()=>{!1===n.params.scrollbar.enabled?k():(x(),D(),C())})),p("update resize observerUpdate lock unlock changeDirection",(()=>{D()})),p("setTranslate",(()=>{C()})),p("setTransition",((l,s)=>{!function(l){n.params.scrollbar.el&&n.scrollbar.el&&(n.scrollbar.dragEl.style.transitionDuration=`${l}ms`)}(s)})),p("enable disable",(()=>{const{el:l}=n.scrollbar;l&&l.classList[n.enabled?"remove":"add"](...r(n.params.scrollbar.lockClass))})),p("destroy",(()=>{H()}));const k=()=>{n.el.classList.add(...r(n.params.scrollbar.scrollbarDisabledClass)),n.scrollbar.el&&n.scrollbar.el.classList.add(...r(n.params.scrollbar.scrollbarDisabledClass)),H()};Object.assign(n.scrollbar,{enable:()=>{n.el.classList.remove(...r(n.params.scrollbar.scrollbarDisabledClass)),n.scrollbar.el&&n.scrollbar.el.classList.remove(...r(n.params.scrollbar.scrollbarDisabledClass)),x(),D(),C()},disable:k,updateSize:D,setTranslate:C,init:x,destroy:H})}export{n as default};