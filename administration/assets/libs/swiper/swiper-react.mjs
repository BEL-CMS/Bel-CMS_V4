import e,{useEffect as r,useLayoutEffect as t,useContext as n,createContext as s,forwardRef as a,useState as l,useRef as i}from"react";import{S as c}from"./shared/swiper-core.mjs";import{g as o,m as p,a as u,u as d}from"./shared/update-on-virtual-data.mjs";import{d as m,w as f,n as w,b as h,a as v,e as E,u as y}from"./shared/update-swiper.mjs";function g(){return g=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},g.apply(this,arguments)}function b(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function x(r){const t=[];return e.Children.toArray(r).forEach((e=>{b(e)?t.push(e):e.props&&e.props.children&&x(e.props.children).forEach((e=>t.push(e)))})),t}function N(r){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return e.Children.toArray(r).forEach((e=>{if(b(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=x(e.props.children);r.length>0?r.forEach((e=>t.push(e))):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function O(e,n){return"undefined"==typeof window?r(e,n):t(e,n)}const S=s(null),j=()=>n(S),C=s(null),P=()=>n(C),$=a((({className:t,tag:n="div",wrapperTag:s="div",children:a,onSwiper:b,...x}={},S)=>{let j=!1;const[P,$]=l("swiper"),[k,z]=l(null),[I,_]=l(!1),A=i(!1),B=i(null),T=i(null),F=i(null),H=i(null),L=i(null),U=i(null),V=i(null),q=i(null),{params:D,passedParams:G,rest:J,events:K}=o(x),{slides:M,slots:Q}=N(a),R=()=>{_(!I)};Object.assign(D.on,{_containerClasses(e,r){$(r)}});const W=()=>{Object.assign(D.on,K),j=!0;const e={...D};if(delete e.wrapperClass,T.current=new c(e),T.current.virtual&&T.current.params.virtual.enabled){T.current.virtual.slides=M;const e={cache:!1,slides:M,renderExternal:z,renderExternalUpdate:!1};E(T.current.params.virtual,e),E(T.current.originalParams.virtual,e)}};return B.current||W(),T.current&&T.current.on("_beforeBreakpoint",R),r((()=>()=>{T.current&&T.current.off("_beforeBreakpoint",R)})),r((()=>{!A.current&&T.current&&(T.current.emitSlidesClasses(),A.current=!0)})),O((()=>{if(S&&(S.current=B.current),B.current)return T.current.destroyed&&W(),p({el:B.current,nextEl:L.current,prevEl:U.current,paginationEl:V.current,scrollbarEl:q.current,swiper:T.current},D),b&&!T.current.destroyed&&b(T.current),()=>{T.current&&!T.current.destroyed&&T.current.destroy(!0,!1)}}),[]),O((()=>{!j&&K&&T.current&&Object.keys(K).forEach((e=>{T.current.on(e,K[e])}));const e=u(G,F.current,M,H.current,(e=>e.key));return F.current=G,H.current=M,e.length&&T.current&&!T.current.destroyed&&y({swiper:T.current,slides:M,passedParams:G,changedParams:e,nextEl:L.current,prevEl:U.current,scrollbarEl:q.current,paginationEl:V.current}),()=>{K&&T.current&&Object.keys(K).forEach((e=>{T.current.off(e,K[e])}))}})),O((()=>{d(T.current)}),[k]),e.createElement(n,g({ref:B,className:m(`${P}${t?` ${t}`:""}`)},J),e.createElement(C.Provider,{value:T.current},Q["container-start"],e.createElement(s,{className:f(D.wrapperClass)},Q["wrapper-start"],D.virtual?function(r,t,n){if(!n)return null;const s=e=>{let r=e;return e<0?r=t.length+e:r>=t.length&&(r-=t.length),r},a=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:l,to:i}=n,c=r.params.loop?-t.length:0,o=r.params.loop?2*t.length:t.length,p=[];for(let e=c;e<o;e+=1)e>=l&&e<=i&&p.push(t[s(e)]);return p.map(((t,n)=>e.cloneElement(t,{swiper:r,style:a,key:t.props.virtualIndex||t.key||`slide-${n}`})))}(T.current,M,k):M.map(((r,t)=>e.cloneElement(r,{swiper:T.current,swiperSlideIndex:t}))),Q["wrapper-end"]),w(D)&&e.createElement(e.Fragment,null,e.createElement("div",{ref:U,className:"swiper-button-prev"}),e.createElement("div",{ref:L,className:"swiper-button-next"})),h(D)&&e.createElement("div",{ref:q,className:"swiper-scrollbar"}),v(D)&&e.createElement("div",{ref:V,className:"swiper-pagination"}),Q["container-end"]))}));$.displayName="Swiper";const k=a((({tag:r="div",children:t,className:n="",swiper:s,zoom:a,lazy:c,virtualIndex:o,swiperSlideIndex:p,...u}={},d)=>{const f=i(null),[w,h]=l("swiper-slide"),[v,E]=l(!1);function y(e,r,t){r===f.current&&h(t)}O((()=>{if(void 0!==p&&(f.current.swiperSlideIndex=p),d&&(d.current=f.current),f.current&&s){if(!s.destroyed)return s.on("_slideClass",y),()=>{s&&s.off("_slideClass",y)};"swiper-slide"!==w&&h("swiper-slide")}})),O((()=>{s&&f.current&&!s.destroyed&&h(s.getSlideClasses(f.current))}),[s]);const b={isActive:w.indexOf("swiper-slide-active")>=0,isVisible:w.indexOf("swiper-slide-visible")>=0,isPrev:w.indexOf("swiper-slide-prev")>=0,isNext:w.indexOf("swiper-slide-next")>=0},x=()=>"function"==typeof t?t(b):t;return e.createElement(r,g({ref:f,className:m(`${w}${n?` ${n}`:""}`),"data-swiper-slide-index":o,onLoad:()=>{E(!0)}},u),a&&e.createElement(S.Provider,{value:b},e.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof a?a:void 0},x(),c&&!v&&e.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&e.createElement(S.Provider,{value:b},x(),c&&!v&&e.createElement("div",{className:"swiper-lazy-preloader"})))}));k.displayName="SwiperSlide";export{$ as Swiper,k as SwiperSlide,P as useSwiper,j as useSwiperSlide};